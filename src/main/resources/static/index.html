<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="favicon.png" type="image/png" />
  <title>Abstract Factory</title>
</head>
<body>
<h1><strong>Projeto de software:</strong> <span>Abstract Factory & DAO Factory - Java Spring Boot</span></h1>
<nav></nav>
<section>
  <div>
    <div class="sub_title">
      <h2>üìî O que √© o padr√£o abstract factory?</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <p class="hidden_text">
      O padr√£o Abstract Factory √© um padr√£o de projeto criacional que tem como objetivo fornecer uma interface para criar fam√≠lias de objetos relacionados ou dependentes, sem especificar suas classes concretas. Ele √© especialmente √∫til quando o sistema precisa ser independente da forma como seus objetos s√£o criados, compostos e representados. Em vez de instanciar objetos diretamente, o cliente trabalha com interfaces ou classes abstratas, delegando a cria√ß√£o dos objetos para f√°bricas concretas que implementam a interface da f√°brica abstrata.
    </p>
    <p class="hidden_text">
      Isso garante maior flexibilidade e facilita a troca de implementa√ß√µes, permitindo, por exemplo, mudar todo o conjunto de objetos produzidos apenas trocando a f√°brica utilizada. O padr√£o geralmente envolve tr√™s partes principais: a f√°brica abstrata, que define os m√©todos para cria√ß√£o dos produtos; as f√°bricas concretas, que implementam esses m√©todos retornando produtos espec√≠ficos; e os produtos abstratos, que s√£o as interfaces ou classes base que os produtos concretos devem seguir.
    </p>
    <p class="hidden_text">
      Entre os principais benef√≠cios do Abstract Factory est√£o a desacoplagem da cria√ß√£o dos objetos, a facilidade para adicionar novas fam√≠lias de produtos e a garantia de consist√™ncia entre objetos relacionados, j√° que todos os objetos criados por uma f√°brica concreta pertencem a uma mesma fam√≠lia l√≥gica. Em contrapartida, a principal desvantagem √© que o padr√£o pode aumentar a complexidade do c√≥digo, principalmente se o n√∫mero de fam√≠lias ou produtos for muito grande, exigindo a cria√ß√£o de v√°rias interfaces e classes adicionais.
    </p>
  </div>

  <div>
    <div class="sub_title">
      <h2>üìò O que √© o padr√£o Abstract DAO Factory?</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <p class="hidden_text">
      O <strong>Abstract DAO Factory</strong> √© uma especializa√ß√£o do Abstract Factory focada na camada de persist√™ncia. Um <strong>DAO (Data Access Object)</strong> √© um objeto que abstrai o acesso a dados. A f√°brica abstrata de DAOs, portanto, permite criar objetos de acesso a dados para diferentes bancos (H2, SQLite, PostgreSQL, etc.) sem que a camada de servi√ßo precise saber qual banco est√° sendo utilizado. Isso isola a l√≥gica de neg√≥cio das particularidades do banco de dados.
    </p>
  </div>

  <div>
    <div class="sub_title">
      <h2>üéØ Objetivo:</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <p class="hidden_text">
      Criar uma aplica√ß√£o desacoplada capaz de enviar notifica√ß√µes por diferentes canais (WhatsApp, Email), com consist√™ncia e flexibilidade na troca ou adi√ß√£o de canais, al√©m de permitir altern√¢ncia entre diferentes mecanismos de persist√™ncia (H2 e SQLite) sem alterar o c√≥digo da aplica√ß√£o.
    </p>
  </div>

  <div>
    <div class="sub_title">
      <h2>üî≥ Componentes principais:</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <table class="hidden_table">
      <thead>
      <tr>
        <th>Elemento</th>
        <th>Descri√ß√£o</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>Abstract Factory</td>
        <td>Interface ou classe abstrata que declara m√©todos para criar cada tipo de produto.</td>
      </tr>
      <tr>
        <td>Concrete Factory</td>
        <td>Implementa a Abstract Factory e cria objetos concretos de uma determinada fam√≠lia.</td>
      </tr>
      <tr>
        <td>Abstract Product</td>
        <td>Interface ou classe base que define os tipos dos produtos que podem ser criados.</td>
      </tr>
      <tr>
        <td>Concrete Product</td>
        <td>Implementa√ß√µes concretas dos produtos que pertencem a uma fam√≠lia espec√≠fica.</td>
      </tr>
      <tr>
        <td>Client</td>
        <td>Utiliza apenas as interfaces da f√°brica e dos produtos, sem conhecer as classes concretas.</td>
      </tr>
      </tbody>
    </table>
  </div>

  <div>
    <div class="sub_title">
      <h2>üîÑ Fluxo de Funcionamento</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <ol class="hidden_list">
      <li>Cliente solicita objetos √† f√°brica abstrata</li>
      <li>F√°brica concreta √© instanciada conforme a necessidade (configura√ß√£o, par√¢metro, etc.)</li>
      <li>A f√°brica concreta cria os produtos concretos da fam√≠lia correspondente</li>
      <li>Cliente usa os produtos atrav√©s das interfaces abstratas</li>
    </ol>
  </div>

  <div>
    <div class="sub_title">
      <h2>‚úÖ Vantagens:</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <ul class="hidden_list">
      <li>Desacoplamento entre cliente e classes concretas</li>
      <li>Facilidade para trocar fam√≠lias inteiras de produtos</li>
      <li>Garantia de consist√™ncia entre os objetos criados</li>
    </ul>
  </div>

  <div>
    <div class="sub_title">
      <h2>‚ö†Ô∏è Desvantagens:</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <ul class="hidden_list">
      <li>Aumento da complexidade do c√≥digo</li>
      <li>Mais classes e interfaces para manter</li>
      <li>Dif√≠cil extens√£o com novas varia√ß√µes de produto se n√£o planejado</li>
    </ul>
  </div>
</section>

<section>
  <div>
    <h2>üèóÔ∏è Aplica√ß√£o do Abstract Factory no Projeto NotifyApp</h2>
  </div>

  <div>
    <div class="sub_title">
      <h2>üß± Estrutura geral do projeto</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <p class="hidden_text">
      O projeto <strong>NotifyApp</strong> utiliza <strong>dois padr√µes Abstract Factory</strong> de forma independente e complementar, criando uma arquitetura altamente modular e desacoplada em duas frentes distintas:
    </p>
    <ol class="hidden_list">
      <li><strong>Abstract Factory para Canais de Notifica√ß√£o:</strong> Gerencia a cria√ß√£o de objetos para enviar notifica√ß√µes (Email, WhatsApp).</li>
      <li><strong>Abstract DAO Factory para Persist√™ncia:</strong> Gerencia a cria√ß√£o de objetos para salvar logs de notifica√ß√£o em diferentes bancos de dados (H2, SQLite).</li>
    </ol>
    <ul class="hidden_list">
      <li><strong>application:</strong> Regras de neg√≥cio (<code>NotifyService</code>).</li>
      <li><strong>config:</strong> Configura√ß√£o de beans e propriedades (<code>NotifyConfig</code>).</li>
      <li><strong>domain:</strong> Interfaces, entidades e reposit√≥rios.</li>
      <li><strong>infrastructure:</strong> Implementa√ß√µes para cada canal (email/whatsapp) e para cada banco (h2/sqlite).</li>
      <li><strong>presentation:</strong> Controllers e DTOs para comunica√ß√£o REST.</li>
      <li><strong>resources/static:</strong> Interface web HTML, JS e CSS.</li>
    </ul>
  </div>

  <div>
    <div class="sub_title">
      <h2>üè≠ Como o padr√£o Abstract Factory est√° implementado</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <ul class="hidden_list">
      <li><strong>NotifyFactory:</strong> Interface que define os m√©todos <code>createMessageFormatter()</code> e <code>createSender()</code>.</li>
      <li><strong>EmailNotifyFactory</strong> e <strong>WhatsAppNotifyFactory:</strong> Implementam a cria√ß√£o de objetos de cada canal.</li>
      <li><strong>MessageFormatter</strong> e <strong>MessageSender:</strong> Interfaces dos produtos abstratos.</li>
      <li><strong>EmailFormatter</strong>, <strong>EmailSender</strong>, <strong>WhatsAppFormatter</strong>, <strong>WhatsAppSender:</strong> Produtos concretos.</li>
      <li><strong>NotifyService:</strong> Cliente que utiliza a <code>NotifyFactory</code>.</li>
    </ul>
  </div>

  <div>
    <div class="sub_title">
      <h2>üõ†Ô∏è Como o padr√£o DAOFactory est√° implementado</h2>
      <button class="show_button">üîΩ</button>
    </div>
      <ul class="hidden_list">
        <li><strong>RepositoryFactory</strong>: Interface abstrata que define o m√©todo <code>createNotifyLogRepository()</code>.</li>
        <li><strong>H2NotifyLogFactory</strong> e <strong>SQLiteNotifyLogFactory</strong>: Implementa√ß√µes concretas da f√°brica, que retornam inst√¢ncias dos DAOs espec√≠ficos para cada banco (H2 e SQLite).</li>
        <li><strong>NotifyLogRepository</strong>: Interface do reposit√≥rio (DAO) com m√©todos como <code>save()</code>.</li>
        <li><strong>H2NotifyLogDAO</strong> e <strong>SQLiteNotifyLogDAO</strong>: Implementa√ß√µes concretas de <code>NotifyLogRepository</code> usando <code>EntityManager</code> para persist√™ncia no banco de dados correspondente.</li>
        <li><strong>RepositoryFactoryConfig</strong>: Classe de configura√ß√£o que seleciona dinamicamente a f√°brica concreta (H2 ou SQLite) com base na propriedade <code>notify.persistence</code>.</li>
        <li><strong>NotifyService</strong>: Cliente que utiliza a <code>RepositoryFactory</code> para obter o <code>NotifyLogRepository</code> apropriado e salvar os registros de notifica√ß√£o.</li>
      </ul>
  </div>


  <div>
    <div class="sub_title">
      <h2>üì¶ Organiza√ß√£o detalhada dos pacotes</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <ul class="hidden_list">
      <li><strong>application:</strong> <code>NotifyService</code></li>
      <li><strong>config:</strong> <code>NotifyConfig</code>, <code>RepositoryFactoryConfig</code></li>
      <li><strong>domain/factory:</strong> <code>NotifyFactory</code>, <code>RepositoryFactory</code></li>
      <li><strong>domain/model:</strong> <code>MessageFormatter</code>, <code>MessageSender</code>, <code>NotifyLog</code></li>
      <li><strong>domain/repository:</strong> <code>NotifyLogRepository</code></li>
      <li><strong>infrastructure/email:</strong> <code>EmailFormatter</code>, <code>EmailSender</code>, <code>EmailNotifyFactory</code></li>
      <li><strong>infrastructure/whatsapp:</strong> <code>WhatsAppFormatter</code>, <code>WhatsAppSender</code>, <code>WhatsAppNotifyFactory</code></li>
      <li><strong>infrastructure/h2:</strong> <code>H2NotifyLogDAO</code>, <code>H2NotifyLogFactory</code></li>
      <li><strong>infrastructure/sqlite:</strong> <code>SQLiteNotifyLogDAO</code>, <code>SQLiteNotifyLogFactory</code></li>
      <li><strong>presentation/controller:</strong> <code>NotifyController</code></li>
      <li><strong>presentation/dto:</strong> <code>NotifyRequestDto</code></li>
    </ul>
  </div>

  <div>
    <div class="sub_title">
      <h2>‚öôÔ∏è Como a escolha da f√°brica √© feita?</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <p class="hidden_text">
      A escolha da f√°brica concreta do canal de envio √© determinada pela propriedade <code>notify.type</code> definida no <code>application.properties</code>. Exemplo:
    </p>
    <pre class="hidden_text">notify.type=email</pre>
    <p class="hidden_text">
      J√° a escolha do banco de dados √© efetuada pelo profile <code>spring.profiles.ative</code> definido no <code>application.properties</code>. Exemplo:
    </p>
    <pre class="hidden_text">spring.profiles.active=h2</pre>
    <p class="hidden_text">
      O Spring Boot usa <code>@ConditionalOnProperty</code> para injetar automaticamente a implementa√ß√£o adequada, sem necessidade de alterar o c√≥digo.
    </p>
  </div>

  <div>
  <div class="sub_title">
    <h2>üîÑ Fluxo de funcionamento no NotifyApp (com RepositoryFactory)</h2>
    <button class="show_button">üîΩ</button>
  </div>
  <ol class="hidden_list">
    <li>Cliente envia POST para <code>/notify</code>.</li>
    <li><code>NotifyController</code> repassa a requisi√ß√£o para <code>NotifyService</code>.</li>
    <li><code>NotifyService</code> utiliza a <code>NotifyFactory</code> para obter o <code>MessageFormatter</code> e o <code>MessageSender</code>.</li>
    <li>A mensagem √© formatada e enviada pelo canal apropriado (email ou WhatsApp).</li>
    <li><code>NotifyService</code> tamb√©m usa a <code>RepositoryFactory</code> para obter o <code>NotifyLogRepository</code> correspondente ao banco configurado (H2 ou SQLite).</li>
    <li>O envio √© registrado no banco atrav√©s da entidade <code>NotifyLog</code> e persistido pela implementa√ß√£o apropriada do DAO.</li>
  </ol>
</div>

  <div>
    <div class="sub_title">
      <h2>‚úÖ Benef√≠cios da aplica√ß√£o no projeto</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <ul class="hidden_list">
      <li><strong>Desacoplamento:</strong> O <code>NotifyService</code> √© independente das implementa√ß√µes concretas tanto de envio quanto de persist√™ncia.</li>
      <li><strong>Flexibilidade:</strong> Permite escolher o canal de envio (<code>email</code> ou <code>whatsapp</code>) e o banco de dados (<code>H2</code> ou <code>SQLite</code>) via configura√ß√£o.</li>
      <li><strong>Manuten√ß√£o:</strong> F√°cil de estender com novos canais e novos tipos de armazenamento (ex: PostgreSQL, MySQL).</li>
      <li><strong>Consist√™ncia:</strong> Usa f√°bricas para criar fam√≠lias coerentes de objetos relacionados (formatter/sender e DAOs).</li>
      <li><strong>Integra√ß√£o com Spring:</strong> Instancia dinamicamente os beans certos por meio de configura√ß√µes e inje√ß√£o de depend√™ncias.</li>
    </ul>
  </div>


  <div>
    <div class="sub_title">
      <h2>üí° Conclus√£o</h2>
      <button class="show_button">üîΩ</button>
    </div>
    <p class="hidden_text">
      O uso do padr√£o Abstract Factory no NotifyApp torna o sistema altamente modular, flex√≠vel e preparado para mudan√ßas. Ele separa claramente as responsabilidades entre formata√ß√£o/envio de mensagens e persist√™ncia dos dados, permitindo a troca ou adi√ß√£o de canais e bancos sem alterar o n√∫cleo do sistema.
    </p>
  </div>  
</section>

<div id="next_button">
  <a href="send_notify.html">
    <button>üëâ Visualizar a Implementa√ß√£o</button>
  </a>
</div>

<footer>
  <small>FEITO COM √ìDIO E FALTA DE CARINHO ‚ù§Ô∏è &copy; 2025 Jo√£o Pedro A.Silveira. Todos os direitos reservados.</small>
</footer>

<script src="index.js"></script>
</body>
</html>